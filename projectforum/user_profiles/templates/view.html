{% extends "base.html" %}
{% load staticfiles %}

{% block header %}
    <link rel="stylesheet" type="text/css"
            href="{% static 'external/jqueryui/jquery-ui.min.css' %}">
    <link rel="stylesheet" type="text/css"
            href="{% static 'external/jqueryraty/jquery.raty.css' %}">
    <script src="{% static 'external/jqueryraty/jquery.raty.js' %}"></script>
    <script src="{% static 'js/ratings.js' %}"></script>
{% endblock %}

{% block content %}
    {% if user_profile %}
        {% if can_edit %}
            <p>
                <a class='edit_profile_button' href="{% url 'profile:edit' user_profile.user.username %}">
                    Edit
                </a>
            </p>
        {% endif %}

        {% if user_profile.openToEmploy %}
            <p class='side_notice'>User is open to full-time employment.</p>
        {% endif %}

        <h2>User profile for {% firstof user_profile.user.get_full_name user_profile.user.username %}</h2>
        <div class='user_details'>
            <div class='ul'>
                <div class='li'>
                    <p>Email: {{ user_profile.user.email }}</a></p>
                </div>
                <div class='li'>
                    <p>Phone number: {{ user_profile.phone_number }}</p>
                </div>
            </div>

            {% if user_profile.github or user_profile.linkedin or user_profile.personal %}
            <div class='ul'>
                {% if user_profile.github %}
                <div class='li'>
                    <p>Github: <a href="{{ user_profile.github }}">{{ user_profile.github }}</a></p>
                </div>
                {% endif %}
                {% if user_profile.linkedin %}
                <div class='li'>
                    <p>LinkedIn: <a href="{{ user_profile.linkedin }}">{{ user_profile.linkedin }}</a></p>
                </div>
                {% endif %}
                {% if user_profile.personal %}
                <div class='li'>
                    <p>Personal: <a href="{{ user_profile.personal }}">{{ user_profile.personal }}</a></p>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </div>

        <h4>Skills:</h4>
        <div class="ul tags">
            {% for skill_tag in user_profile.skills.all %}
                <div class='li'>{{ skill_tag.skill }}</div>
            {% empty %}
                <div class='li'>No skills listed.</div>
            {% endfor %}
        </div>

        {% if user_profile.showPastProjects %}
            {% if past_owned_projects %}
                <h4>Past Projects Started</h4>
                <div class='ul'>
                    {% for project in past_owned_projects %}
                        <div class='li'>
                            <a href= "{% url 'project:detail' project.id %}">
                                {{ project.title }}
                            </a>
                            <div>{{ project.description }}</div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
            {% if past_projects %}
                <h4>Past Projects Worked On</h4>
                <div class='ul'>
                    {% for project in past_projects %}
                        <div class='li'>
                            <a href= "{% url 'project:detail' project.id %}">
                                {{ project.title }}
                            </a>
                            <div>{{ project.description }}</div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endif %}
        <br/>
        {% if user_profile.showRatings %}
            <h4 class='title_tab'>Ratings</h4>
            <div class='ul titled_list'>
                {% for review in user_reviews %}
                    <div class="li project-review">
                        <div class="review-score"
                             data-score="{{ review.score }}">
                        </div>
                        <div class='reviewer'>
                            By
                            <a href="{% url 'profile:view' review.reviewer.username %}">{{ review.reviewer.username }}</a>
                        </div>
                        <div class="review-comment">
                            {{ review.comment | escape }}
                        </div>
                    </div>
                {% empty %}
                    <div class="li project-review">
                        No reviews yet.
                    </div>
                {% endfor %}
            </div>
        {% endif %}

    {% else %}
        <p>No such user exists.</p>
    {% endif %}

{% endblock %}
