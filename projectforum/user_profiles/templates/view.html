{% extends "base.html" %}

{% block header %}
{% load static %}
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/raty/2.7.0/jquery.raty.min.css">
<script src="{% static "js/jquery.raty.js" %}" type="text/javascript" charset="utf-8"></script>
{% endblock %}

{% block content %}
    {% if user_profile %}
        <h2>User profile for {{ user_profile.user.first_name }} {{ user_profile.user.last_name }}</h2>
        {% if can_edit %}
            <p>
                <a href="{% url 'profile:edit' user_profile.user.username %}">
                    Edit
                </a>
            </p>
        {% endif %}

        {% if user_profile.openToEmploy %}
            <p>User is open to full-time employment.</p>
        {% endif %}

        <p>Email: {{ user_profile.user.email }}</p>
        <p>Phone number: {{ user_profile.phone_number }}</p>

        <p>Github: {{ user_profile.github }}</p>
        <p>LinkedIn: {{ user_profile.linkedin }}</p>
        <p>Personal: {{ user_profile.personal }}</p>

        <p>Skills:</p>
        <ul>
            {% for skill_tag in user_profile.skills.all %}
                <li>{{ skill_tag.skill }}</li>
            {% empty %}
                <li>No skills listed.</li>
            {% endfor %}
        </ul>

        {% if user_profile.showPastProjects %}
            <p>Past Projects</p>
        {% endif %}

        {% if user_profile.showRatings %}
            <p>Ratings</p>
            {% for review in user_reviews %}
                <hr>
                <div class="project-review">
                    <div class="review-score"
                         data-score="{{ review.score }}">
                    </div>
                    <br/>
                    <div class="review-comment">
                        {{ review.comment | escape }}
                    </div>
                    <br/>
                    {{ review.reviewer.username }}
                </div>
                <br>            
            {% endfor %}
        {% endif %}
    {% else %}
        <p>No such user exists.</p>
    {% endif %}

    <!-- for static reviews  and input reviews-->
    <script type="text/javascript">
        $(document).ready(function (){
            $(".review-score").raty({
                score: function() {
                    return $(this).attr('data-score');
                },
                readOnly: true,
                path:'/static/images',
            });
        });
    </script>

{% endblock %}
